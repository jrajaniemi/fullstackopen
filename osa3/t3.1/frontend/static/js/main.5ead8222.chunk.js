(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),l=(t(20),t(21),t(2)),u=function(e){var n=e.addName,t=e.newName,a=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{value:o,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary m-1",type:"submit"},"Add")))},i=function(e){var n=e.search,t=e.handleSearch;return r.a.createElement("p",null,"filter show with ",r.a.createElement("input",{value:n,onChange:t}))},s=function(e){var n=e.rows;return r.a.createElement("ul",null,n)},m=function(e){var n=e.message,t="mt-3 mb-1 alert alert-"+e.messageType;return""===n?r.a.createElement("div",null):r.a.createElement("div",{className:t,role:"alert"},n)},d=t(3),f=t.n(d),h="http://localhost:3001/api/persons",b={getAllPersons:function(){return f.a.get(h).then(function(e){return e.data})},addPerson:function(e){return f.a.post(h,e).then(function(e){return e.data})},updatePerson:function(e,n){return f.a.put(h+"/"+e,n).then(function(e){return e.data})},deletePerson:function(e){return f.a.delete(h+"/"+e).then(function(e){return e.data})}};var v=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),f=d[0],h=d[1],v=Object(a.useState)(""),g=Object(l.a)(v,2),p=g[0],E=g[1],w=Object(a.useState)(""),N=Object(l.a)(w,2),O=N[0],j=N[1],y=Object(a.useState)(""),P=Object(l.a)(y,2),k=P[0],C=P[1],S=Object(a.useState)("success"),T=Object(l.a)(S,2),A=T[0],D=T[1];Object(a.useEffect)(function(){b.getAllPersons().then(function(e){o(e)}).catch(function(e){console.log("getAllPersons",e)})},[]);var x=function(e,n){console.log(e),window.confirm("Delete "+n+"?")&&b.deletePerson(e).then(function(){o(t.filter(function(n){return n.id!==e})),console.log("person ",e," deleted"),C(n+" removed"),D("success"),setTimeout(function(){C("")},5e3)}).catch(function(e){console.log("deletePerson ",e),C(n+"  has already been removed from server"),D("danger"),setTimeout(function(){C("")},5e3)})};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(m,{message:k,messageType:A}),r.a.createElement("h1",null,"Phonebook"),r.a.createElement(i,{search:O,handleSearch:function(e){e.preventDefault(),console.log(e.target.value),j(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(u,{addName:function(e){e.preventDefault();var n=t.find(function(e){return e.name===f});if(t.indexOf(n)>-1)window.confirm(f+" is already added to phonebook, replace the old number with a new one?")&&b.updatePerson(n.id,{name:f,number:p}).then(function(e){console.log(e,typeof e),o(t.map(function(n){return n.id!==e.id?n:e})),h(""),E(""),C("Updated "+f),D("success"),setTimeout(function(){C("")},5e3)}).catch(function(e){console.log("updatePerson ",e)});else{var a={name:f,number:p};b.addPerson(a).then(function(e){o(t.concat(e)),h(""),E(""),C("Added "+f),D("success"),setTimeout(function(){C("")},5e3)}).catch(function(e){console.log("addName ",e)})}},newName:f,handleNameChange:function(e){e.preventDefault(),console.log(e.target.value),h(e.target.value)},newNumber:p,handleNumberChange:function(e){e.preventDefault(),console.log(e.target.value),E(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{rows:function(){if(""===O)return t.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,r.a.createElement("button",{className:"btn btn-primary btn-sm m-1",onClick:function(){return x(e.id,e.name)}},"delete"))});var e=t.filter(function(e){return new RegExp(O,"i").test(e.name)});return console.log(e),e.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number,r.a.createElement("button",{className:"btn btn-primary btn-sm m-1",onClick:function(){return x(e.id,e.name)}},"delete"))})}()}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.5ead8222.chunk.js.map